!function(){var e={307:function(){},407:function(){},574:function(e,t,n){var i=n(307);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("0fbee9f8",i,!0,{})},410:function(e,t,n){var i=n(407);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("9df451ba",i,!0,{})},534:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},a=0;a<t.length;a++){var l=t[a],s=l[0],r={id:e+":"+a,css:l[1],media:l[2],sourceMap:l[3]};i[s]?i[s].parts.push(r):n.push(i[s]={id:s,parts:[r]})}return n}n.d(t,{A:function(){return h}});var a,l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},r=l&&(document.head||document.getElementsByTagName("head")[0]),o=null,m=0,d=!1,c=function(){},u=null,p="data-vue-ssr-id",g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,a){d=n,u=a||{};var l=i(e,t);return f(l),function(t){for(var n=[],a=0;a<l.length;a++){var r=s[l[a].id];r.refs--,n.push(r)}t?f(l=i(e,t)):l=[];for(var a=0;a<n.length;a++){var r=n[a];if(0===r.refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete s[r.id]}}}}function f(e){for(var t=0;t<e.length;t++){var n=e[t],i=s[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(b(n.parts[a]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var l=[],a=0;a<n.parts.length;a++)l.push(b(n.parts[a]));s[n.id]={id:n.id,refs:1,parts:l}}}}function v(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(d)return c;i.parentNode.removeChild(i)}if(g){var a=m++;t=y.bind(null,i=o||(o=v()),a,!1),n=y.bind(null,i,a,!0)}else t=_.bind(null,i=v()),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):n()}}var w=(a=[],function(e,t){return a[e]=t,a.filter(Boolean).join("\n")});function y(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,a);else{var l=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(l,s[t]):e.appendChild(l)}}function _(e,t){var n=t.css,i=t.media,a=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(p,t.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var l=t[i]={id:i,exports:{}};return e[i](l,l.exports,n),l.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundles/blueallycms/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/blueallycms/"),function(){"use strict";let{Component:e}=Shopware;e.override("sw-cms-sidebar",{template:'{% block sw_cms_sidebar_block_overview_category_options %}\n	{% parent %}\n	<option value="blueAlly">BlueAlly CMS</option>\n{% endblock %}\n'});let{Mixin:t}=Shopware;Shopware.Component.register("sw-cms-el-multi-item-banner",{template:'{% block sw_cms_el_multi_item_banner %}\n	<template>\n		<div class="sw-cms-el-multi-item-banner">\n			<div v-for="(item, index) in items" :key="index" class="sw-cms-el-multi-item-banner__preview-item" :style="{ backgroundColor: item.background }">\n				<strong>{{ item.title }}</strong>\n				<p>{{ item.content }}</p>\n\n				\n				<div v-if="item.image">\n					<img v-if="getMediaUrl(index)" :src="getMediaUrl(index)" alt="Preview" style="max-width: 150px;">\n					<p v-else>\n						[No real-time URL found yet]\n					</p>\n				</div>\n			</div>\n		</div>\n	</template>\n{% endblock %}\n',mixins:[t.getByName("cms-element")],inject:["repositoryFactory"],computed:{items(){return this.element.config.items.value},mediaRepository(){return this.repositoryFactory.create("media")}},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("multi-item-banner"),this.hydrateElementData()},async hydrateElementData(){this.element.data||(this.element.data={});for(let e=0;e<this.items.length;e++){let t=this.items[e].image;if(!t){this.element.data[`media-${e}`]=null,this.element.data[`mediaId-${e}`]=null;continue}let n=await this.mediaRepository.get(t);this.element.data[`media-${e}`]=n,this.element.data[`mediaId-${e}`]=t}},getMediaUrl(e){let t=`media-${e}`,n=this.element.data?.[t];return n?.url||null}}});let{Mixin:i}=Shopware;Shopware.Component.register("sw-cms-el-config-multi-item-banner",{template:'{% block sw_cms_el_config_multi_item_banner %}\n	<div class="sw-cms-el-config-multi-item-banner">\n		<sw-button variant="primary" @click="addItem">\n			Add Item\n		</sw-button>\n\n		<div\n			v-for="(item, index) in items" :key="index" class="sw-cms-el-config-multi-item-banner__item">\n			\n			<sw-text-field\n			:value="getTitle(index)" label="Item Title" placeholder="Enter title..." @update:value="value => setTitle(index, value)"/>\n\n			\n			<sw-textarea-field :value="getContent(index)" label="Item Content" placeholder="Enter content..." @update:value="value => setContent(index, value)"/>\n\n\n			<sw-colorpicker :value="getBackground(index)" label="Background" coloroutput="auto" :alpha="true" :colorlabels="true" zindex="100" @update:value="val => setBackground(index, val)"/>\n\n\n			<sw-media-upload-v2 variant="regular" :upload-tag="getUploadTag(index)" :source="getPreviewSource(index)" :allow-multi-select="false" :default-folder="cmsPageState.pageEntityName" :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')" @media-upload-sidebar-open="() => onOpenMediaModal(index)" @media-upload-remove-image="() => onImageRemove(index)"/>\n\n			<sw-upload-listener :upload-tag="getUploadTag(index)" auto-upload @media-upload-finish="params => onImageUpload(params, index)"/>\n\n			<sw-button variant="danger" @click="removeItem(index)">\n				Remove\n			</sw-button>\n		</div>\n\n\n		<sw-media-modal-v2 v-if="mediaModalIsOpen" variant="full" :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')" :entity-context="cmsPageState.pageEntityName" :allow-multi-select="false" :initial-folder-id="cmsPageState.defaultMediaFolderId" @media-modal-selection-change="onSelectionChanges" @modal-close="onCloseModal"/>\n	</div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[i.getByName("cms-element")],data(){return{mediaModalIsOpen:!1,currentEditIndex:null}},computed:{items(){return this.element.config.items.value},mediaRepository(){return this.repositoryFactory.create("media")},cmsPageState(){return{pageEntityName:"cms_page"}}},created(){this.initElementConfig("multi-item-banner")},methods:{addItem(){this.items.push({title:"",content:"",image:null,background:"#ffffff"}),this.$emit("element-update",this.element)},removeItem(e){this.items.splice(e,1),this.$emit("element-update",this.element)},getTitle(e){return this.items[e].title},getContent(e){return this.items[e].content},getBackground(e){return this.items[e].background},getImage(e){return this.items[e].image},setTitle(e,t){this.items[e].title=t,this.$emit("element-update",this.element)},setContent(e,t){this.items[e].content=t,this.$emit("element-update",this.element)},setBackground(e,t){this.items[e].background=t,this.$emit("element-update",this.element)},getUploadTag(e){return`cms-element-media-config-${this.element.id}-${e}`},async onImageUpload({targetId:e},t){if(console.log("onImageUpload: index =",t,", targetId =",e),!e){this.items[t].image=null,this.updateElementData(null,t),this.$emit("element-update",this.element);return}let n=await this.mediaRepository.get(e);if(!n){this.items[t].image=null,this.updateElementData(null,t),this.$emit("element-update",this.element);return}this.items[t].image=n.id,this.updateElementData(n,t),this.$emit("element-update",this.element)},onImageRemove(e){this.items[e].image=null,this.updateElementData(null,e),this.$emit("element-update",this.element)},onOpenMediaModal(e){console.log("onOpenMediaModal was called with index =",e),this.currentEditIndex=e,this.mediaModalIsOpen=!0},onCloseModal(){this.mediaModalIsOpen=!1},async onSelectionChanges(e){if(console.log("Selected from library:",e),!e||!e.length){this.onCloseModal();return}let t=e[0];this.items[this.currentEditIndex].image=t.id;let n=await this.mediaRepository.get(t.id);console.log("Current edit index:",this.currentEditIndex),this.updateElementData(n,this.currentEditIndex),this.$emit("element-update",this.element),this.onCloseModal()},updateElementData(e,t){this.element.data||(this.element.data={});let n=`media-${t}`,i=`mediaId-${t}`,a=e?e.id:null;this.element.data[n]=e,this.element.data[i]=a},getPreviewSource(e){let t=`media-${e}`,n=this.element.data?.[t];if(n&&n.id)return n;let i=this.items[e];return i.image?{id:i.image,url:""}:null}}}),Shopware.Component.register("sw-cms-el-preview-multi-item-banner",{template:'{% block sw_cms_el_preview_multi_item_banner %}\n	<div class="sw-cms-el-preview-multi-item-banner">\n		Multi-Item Banner Preview\n	</div>\n{% endblock %}\n'}),Shopware.Service("cmsService").registerCmsElement({name:"multi-item-banner",label:"Multi-Item Banner",component:"sw-cms-el-multi-item-banner",configComponent:"sw-cms-el-config-multi-item-banner",previewComponent:"sw-cms-el-preview-multi-item-banner",defaultConfig:{items:{source:"static",value:[{title:"Item 1",content:"Hello",image:null,background:"#ffffff"},{title:"Item 2",content:"World",image:null,background:"#f5f5f5"}]}}}),n(574),Shopware.Component.register("sw-cms-block-blueally-banner",{template:'{% block sw_cms_block_blueally_banner %}\n	<div class="sw_cms_block_blueally_banner">\n		<slot name="content">\n			{% block sw_cms_block_blueally_banner_slot_content %}{% endblock %}\n		</slot>\n	</div>\n{% endblock %}\n'}),n(410),Shopware.Component.register("sw-cms-preview-blueally-banner",{template:'{% block sw_cms_block_blueally_banner_preview %}\n	<div class="sw-cms-preview-my-image-text-reversed">\n		<div>\n			<h2>Lorem ipsum dolor</h2>\n			<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr.</p>\n		</div>\n		<img :src="assetFilter(\'/administration/static/img/cms/preview_mountain_small.jpg\')">\n	</div>\n{% endblock %}\n',computed:{assetFilter(){return Shopware.Filter.getByName("asset")}}}),Shopware.Service("cmsService").registerCmsBlock({name:"blueally-banner",category:"text-image",label:"My Image Text Block!",component:"sw-cms-block-blueally-banner",previewComponent:"sw-cms-preview-blueally-banner",defaultConfig:{marginBottom:"20px",marginTop:"20px",marginLeft:"20px",marginRight:"20px",sizingMode:"boxed"},slots:{content:"multi-item-banner"}})}()}();