!function(){var e={307:function(){},407:function(){},828:function(){},426:function(){},574:function(e,t,n){var i=n(307);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("0fbee9f8",i,!0,{})},410:function(e,t,n){var i=n(407);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("9df451ba",i,!0,{})},699:function(e,t,n){var i=n(828);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("1f9112a8",i,!0,{})},757:function(e,t,n){var i=n(426);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("3fe78ce9",i,!0,{})},534:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},l=0;l<t.length;l++){var a=t[l],o=a[0],s={id:e+":"+l,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}n.d(t,{A:function(){return g}});var l,a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=a&&(document.head||document.getElementsByTagName("head")[0]),r=null,m=0,d=!1,c=function(){},u=null,p="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,n,l){d=n,u=l||{};var a=i(e,t);return f(a),function(t){for(var n=[],l=0;l<a.length;l++){var s=o[a[l].id];s.refs--,n.push(s)}t?f(a=i(e,t)):a=[];for(var l=0;l<n.length;l++){var s=n[l];if(0===s.refs){for(var r=0;r<s.parts.length;r++)s.parts[r]();delete o[s.id]}}}}function f(e){for(var t=0;t<e.length;t++){var n=e[t],i=o[n.id];if(i){i.refs++;for(var l=0;l<i.parts.length;l++)i.parts[l](n.parts[l]);for(;l<n.parts.length;l++)i.parts.push(b(n.parts[l]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var a=[],l=0;l<n.parts.length;l++)a.push(b(n.parts[l]));o[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function b(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(d)return c;i.parentNode.removeChild(i)}if(h){var l=m++;t=y.bind(null,i=r||(r=v()),l,!1),n=y.bind(null,i,l,!0)}else t=x.bind(null,i=v()),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):n()}}var w=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function y(e,t,n,i){var l=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,l);else{var a=document.createTextNode(l),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function x(e,t){var n=t.css,i=t.media,l=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(p,t.id),l&&(n+="\n/*# sourceURL="+l.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},t={};function n(i){var l=t[i];if(void 0!==l)return l.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,n),a.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundles/blueallycms/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/blueallycms/"),function(){"use strict";let{Component:e}=Shopware;e.override("sw-cms-sidebar",{template:'{% block sw_cms_sidebar_block_overview_category_options %}\n	{% parent %}\n	<option value="blueAlly">BlueAlly CMS</option>\n{% endblock %}\n'}),n(699);let{Mixin:t}=Shopware;Shopware.Component.register("sw-cms-el-multi-item-banner",{template:'{% block sw_cms_el_multi_item_banner %}\n	<template>\n		<div class="sw-cms-el-multi-item-banner">\n			<div v-for="(item, index) in items" :key="index" class="sw-cms-el-multi-item-banner__preview-item">\n				<div\n					class="banner-image-wrapper">\n					\n					<img\n					v-if="item.image && getMediaUrl(index)" :src="getMediaUrl(index)" alt="Preview" class="banner-image"/>\n					\n					<div v-else class="banner-image--placeholder">\n						[Please add an image]\n					</div>\n\n					<div :class="item.position" class="banner-content">\n						<component :style="{ color: item.textColor }" :is="item.titleHeading">\n							{{ item.title }}\n						</component>\n						<p :style="{ color: item.textColor }">{{ item.content }}</p>\n					</div>\n				</div>\n			</div>\n		</div>\n	</template>\n{% endblock %}\n',mixins:[t.getByName("cms-element")],inject:["repositoryFactory"],computed:{items(){return this.element.config.items.value},mediaRepository(){return this.repositoryFactory.create("media")}},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("multi-item-banner"),this.hydrateElementData()},async hydrateElementData(){this.element.data||(this.element.data={});for(let e=0;e<this.items.length;e++){let t=this.items[e].image;if(!t){this.element.data[`media-${e}`]=null,this.element.data[`mediaId-${e}`]=null;continue}let n=await this.mediaRepository.get(t);this.element.data[`media-${e}`]=n,this.element.data[`mediaId-${e}`]=t}},getMediaUrl(e){let t=`media-${e}`,n=this.element.data?.[t];return n?.url||null}}}),n(757);let{Mixin:i}=Shopware;Shopware.Component.register("sw-cms-el-config-multi-item-banner",{template:'{% block sw_cms_el_config_multi_item_banner %}\n	<div class="sw-cms-el-config-multi-item-banner">\n\n		<div\n			v-for="(item, index) in items" :key="index" class="sw-cms-el-config-multi-item-banner__item">\n			\n			<sw-text-field\n			:value="getTitle(index)" label="Item Title" placeholder="Enter title..." @update:value="value => setTitle(index, value)"/>\n\n			\n			<sw-text-field\n			:value="getTitleHeading(index)" label="Title heading" placeholder="Enter title heading h1-h6..." @update:value="value => setTitleHeading(index, value)"/>\n\n			\n			<sw-textarea-field\n			:value="getContent(index)" label="Item Content" placeholder="Enter content..." @update:value="value => setContent(index, value)"/>\n\n			\n			<sw-single-select\n			label="Overlay position" :options="positionOptions" :value="getPosition(index)" placeholder="Select position..." @update:value="value => setPosition(index, value)"/>\n\n			\n			<sw-colorpicker\n			:value="getTextColor(index)" label="Text color" coloroutput="auto" :alpha="true" :colorlabels="true" zindex="100" @update:value="val => setTextColor(index, val)"/>\n\n			\n			<sw-media-upload-v2 variant="regular" :upload-tag="getUploadTag(index)" :source="getPreviewSource(index)" :allow-multi-select="false" :default-folder="cmsPageState.pageEntityName" :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')" @media-upload-sidebar-open="() => onOpenMediaModal(index)" @media-upload-remove-image="() => onImageRemove(index)"/>\n\n			<sw-upload-listener\n			:upload-tag="getUploadTag(index)" auto-upload @media-upload-finish="params => onImageUpload(params, index)"/>\n\n			\n			<sw-button variant="danger" @click="removeItem(index)" class="remove-item">\n				Remove\n			</sw-button>\n		</div>\n		\n		<sw-media-modal-v2\n		v-if="mediaModalIsOpen" variant="full" :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')" :entity-context="cmsPageState.pageEntityName" :allow-multi-select="false" :initial-folder-id="cmsPageState.defaultMediaFolderId" @media-modal-selection-change="onSelectionChanges" @modal-close="onCloseModal"/>\n\n		\n		<sw-button variant="primary" @click="addItem" class="add-item">\n			Add Item\n		</sw-button>\n	</div>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[i.getByName("cms-element")],data(){return{mediaModalIsOpen:!1,currentEditIndex:null,positionOptions:[{label:"Top Left",value:"top-left"},{label:"Top Center",value:"top-center"},{label:"Top Right",value:"top-right"},{label:"Middle Left",value:"middle-left"},{label:"Middle Center",value:"middle-center"},{label:"Middle Right",value:"middle-right"},{label:"Bottom Left",value:"bottom-left"},{label:"Bottom Center",value:"bottom-center"},{label:"Bottom Right",value:"bottom-right"}]}},computed:{items(){return this.element.config.items.value},mediaRepository(){return this.repositoryFactory.create("media")},cmsPageState(){return{pageEntityName:"cms_page"}}},created(){this.initElementConfig("multi-item-banner")},methods:{addItem(){this.items.push({title:"",content:"",image:null,textColor:"#ffffff"}),this.$emit("element-update",this.element)},removeItem(e){this.items.splice(e,1),this.$emit("element-update",this.element)},getTitle(e){return this.items[e].title},getContent(e){return this.items[e].content},getTextColor(e){return this.items[e].textColor},getImage(e){return this.items[e].image},getTitleHeading(e){return this.items[e].titleHeading},getPosition(e){return this.items[e].position},setTitle(e,t){this.items[e].title=t,this.$emit("element-update",this.element)},setContent(e,t){this.items[e].content=t,this.$emit("element-update",this.element)},setTextColor(e,t){this.items[e].textColor=t,this.$emit("element-update",this.element)},setTitleHeading(e,t){this.items[e].titleHeading=t,this.$emit("element-update",this.element)},setPosition(e,t){console.log("running"),this.items[e].position=t,this.$emit("element-update",this.element)},getUploadTag(e){return`cms-element-media-config-${this.element.id}-${e}`},async onImageUpload({targetId:e},t){if(console.log("onImageUpload: index =",t,", targetId =",e),!e){this.items[t].image=null,this.updateElementData(null,t),this.$emit("element-update",this.element);return}let n=await this.mediaRepository.get(e);if(!n){this.items[t].image=null,this.updateElementData(null,t),this.$emit("element-update",this.element);return}this.items[t].image=n.id,this.updateElementData(n,t),this.$emit("element-update",this.element)},onImageRemove(e){this.items[e].image=null,this.updateElementData(null,e),this.$emit("element-update",this.element)},onOpenMediaModal(e){console.log("onOpenMediaModal was called with index =",e),this.currentEditIndex=e,this.mediaModalIsOpen=!0},onCloseModal(){this.mediaModalIsOpen=!1},async onSelectionChanges(e){if(console.log("Selected from library:",e),!e||!e.length){this.onCloseModal();return}let t=e[0];this.items[this.currentEditIndex].image=t.id;let n=await this.mediaRepository.get(t.id);console.log("Current edit index:",this.currentEditIndex),this.updateElementData(n,this.currentEditIndex),this.$emit("element-update",this.element),this.onCloseModal()},updateElementData(e,t){this.element.data||(this.element.data={});let n=`media-${t}`,i=`mediaId-${t}`,l=e?e.id:null;this.element.data[n]=e,this.element.data[i]=l},getPreviewSource(e){let t=`media-${e}`,n=this.element.data?.[t];if(n&&n.id)return n;let i=this.items[e];return i.image?{id:i.image,url:""}:null}}}),Shopware.Component.register("sw-cms-el-preview-multi-item-banner",{template:'{% block sw_cms_el_preview_multi_item_banner %}\n	<div class="sw-cms-el-preview-multi-item-banner">\n		Multi-Item Banner Preview\n	</div>\n{% endblock %}\n'}),Shopware.Service("cmsService").registerCmsElement({name:"multi-item-banner",label:"Multi-Item Banner",component:"sw-cms-el-multi-item-banner",configComponent:"sw-cms-el-config-multi-item-banner",previewComponent:"sw-cms-el-preview-multi-item-banner",defaultConfig:{items:{source:"static",value:[{title:"Lorem ipsum #1",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam sed egestas tortor. Proin facilisis faucibus dui a congue. Fusce porta odio vitae lectus feugiat faucibus.",image:null,textColor:"#ffffff",titleHeading:"h1",position:"middle-center"}]}}}),n(574),Shopware.Component.register("sw-cms-block-blueally-banner",{template:'{% block sw_cms_block_blueally_banner %}\n	<div class="sw_cms_block_blueally_banner">\n		<slot name="content">\n			{% block sw_cms_block_blueally_banner_slot_content %}{% endblock %}\n		</slot>\n	</div>\n{% endblock %}\n'}),n(410),Shopware.Component.register("sw-cms-preview-blueally-banner",{template:'{% block sw_cms_block_blueally_banner_preview %}\n	<div\n		class="banner-image-wrapper">\n		\n		<img :src="assetFilter(\'/administration/static/img/cms/preview_mountain_small.jpg\')"/>\n		<div class="banner-content">\n			<h1 style="color: #fff">Lorem ipsum dolor</h1>\n			<p style="color: #fff">Lorem ipsum dolor sit amet, consetetur sadipscing elitr.</p>\n		</div>\n	</div>\n\n{% endblock %}\n',computed:{assetFilter(){return Shopware.Filter.getByName("asset")}}}),Shopware.Service("cmsService").registerCmsBlock({name:"blueally-banner",category:"blueAlly",label:"BlueAlly Banner Block",component:"sw-cms-block-blueally-banner",previewComponent:"sw-cms-preview-blueally-banner",defaultConfig:{marginBottom:"20px",marginTop:"20px",marginLeft:"20px",marginRight:"20px",sizingMode:"boxed"},slots:{content:"multi-item-banner"}})}()}();